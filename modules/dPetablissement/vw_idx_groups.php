<?php /* $Id$ */

/**
* @package Mediboard
* @subpackage dPetablissement
* @version $Revision$
* @author Romain Ollivier
*/

global $AppUI, $can, $m;

$can->needsRead();

// Droit de lecture dPsante400
$moduleSante400 = CModule::getInstalled("dPsante400");
$canSante400    = $moduleSante400 ? $moduleSante400->canDo() : new CCanDo;

// Rcupration des fonctions
$listGroups = new CGroups;
$listGroups = $listGroups->loadList();

foreach($listGroups as $key => $value) {
  $listGroups[$key]->loadRefs();
}

// Rcupration du groupe selectionn
$usergroup = new CGroups;
$usergroup->load(mbGetValueFromGetOrSession("group_id", 0));

// Cration du template
$smarty = new CSmartyDP();

$smarty->assign("canSante400" , $canSante400);
$smarty->assign("usergroup"   , $usergroup);
$smarty->assign("listGroups"  , $listGroups);

$smarty->display("vw_idx_groups.tpl");

?>