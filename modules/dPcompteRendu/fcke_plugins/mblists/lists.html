<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
	<script type="text/javascript" src="../../../../lib/scriptaculous/lib/prototype.js"></script>
  <script type="text/javascript">
    var dialog = window.parent ;
		dialog.document.getElementById("btnCancel").value = "Fermer";
    var oEditor = dialog.InnerDialogLoaded() ;
    var FCK = oEditor.FCK;
    var FCKTools  = oEditor.FCKTools ;
    var FCKConfig = oEditor.FCKConfig ;
    var FCKBrowserInfo = oEditor.FCKBrowserInfo ;
		var lists = [];
		if (window.parent.parent.listeChoix[0] != null)
      lists = window.parent.parent.listeChoix[0].options;

		// Au chargement, on initialise la liste déroulante avec les listes
    window.onload = function () {
      dialog.SetAutoSize( true ) ;
			var list = $("list");
			if (lists.length > 0) {
				$H(lists).each(function(item, iterator){
					if (item[0] != "AddItem" && item[0] != "IndexOf") 
						list.insert("<option value='" + item[1].item + "'>" + item[1].view + "</option>");
				});
			}
			else {
				list.insert("<option value=''>Aucune liste</option>");
			}
      list.selectedIndex = -1;
    }

    function insertHTML(string) {
      // Before doing anything, save undo snapshot.
      oEditor.FCKUndo.SaveUndoStep() ;

      var sHtml ;
      sHtml = "<span class='name'>" + string + "</span>&nbsp;";
      sHtml = FCKTools.ProcessLineBreaks( oEditor, FCKConfig, sHtml ) ;
      oEditor.FCK.InsertHtml( sHtml ) ;
      dialog.document.getElementById("btnCancel").onclick();
      return true ;
    }
  </script>

</head>
<body>

<table>
	<tr>
		<td>
			<select id="list" size="10" style="width: 150px; height: 180px;" ondblclick="insertHTML(this.value)">
			</select>
		</td>
	</tr>
	
</table>
</body>
</html>
