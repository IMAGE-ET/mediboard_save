Options -Indexes

<IfModule mod_deflate.c>
  # DEFLATE by type - html, text, css, xml
  AddOutputFilterByType DEFLATE text/html text/plain text/css text/xml
   
  # DEFLATE by type - javascript
  AddOutputFilterByType DEFLATE application/x-javascript application/javascript text/javascript text/x-js text/x-javascript
   
  # DEFLATE by extension
  AddOutputFilter DEFLATE js css htm html xml
</IfModule>

<IfModule mod_headers.c>
  # 1 day cache for CSS and JS
  <FilesMatch "\.(js|css)$">
  Header set Cache-Control "max-age=86400, public"
  </FilesMatch>
  
  # 1 week cache for not versionned resources
  <FilesMatch "\.(flv|gif|jpg|jpeg|png|ico|swf|pdf|jar)$">
  Header set Cache-Control "max-age=604800, public"
  </FilesMatch>
  
  # 1 month cache for versionned resources
  <FilesMatch "\.(js|css|flv|gif|jpg|jpeg|png|ico|swf|pdf|jar)(\?[^&]+)$">
  Header set Cache-Control "max-age=2592000"
  </FilesMatch>
</IfModule>

<FilesMatch "\.(tpl|tpl.php|class.php)$">
  order allow,deny
  deny from all
</FilesMatch>

<FilesMatch "mb-log\.html">
  order allow,deny
  deny from all
</FilesMatch>

<IfModule mod_alias.c>
  RedirectMatch 403 (classes|includes|legacy|locales|modules|shell)/.*\.(php|tpl|sh|ttf)$
</IfModule>

php_flag magic_quotes_gpc off